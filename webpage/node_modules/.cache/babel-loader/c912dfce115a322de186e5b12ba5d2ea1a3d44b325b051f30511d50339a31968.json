{"ast":null,"code":"var _jsxFileName = \"/Users/tianhonggao/Desktop/sample-react/webpage/src/Admin/Statistic.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport moment from 'moment';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Stat = () => {\n  _s();\n  const [productStats, setProductStats] = useState([]);\n  const [sortedProducts, setSortedProducts] = useState([]);\n  const fetchProductStats = useCallback(async () => {\n    try {\n      const response = await fetch('http://localhost:8000/api/productStats');\n      const data = await response.json();\n      setProductStats(data);\n      sortProductsByPopularity(data);\n    } catch (error) {\n      console.error('Failed to fetch product stats:', error);\n    }\n  }, []);\n  useEffect(() => {\n    fetchProductStats();\n  }, [fetchProductStats]);\n  const sortProductsByPopularity = useCallback(stats => {\n    const sorted = [...stats].sort((a, b) => b.popularity - a.popularity);\n    setSortedProducts(sorted);\n  }, []);\n  const handleCheckout = () => {\n    // Handle the checkout process and update the statistics accordingly\n    // Make the necessary API calls to update the product stats on the server\n\n    // Fetch the updated product stats\n    fetchProductStats();\n  };\n  const chartData = {\n    labels: sortedProducts.map(product => moment(product.date).format('MMM D')),\n    datasets: [{\n      label: 'Popularity',\n      data: sortedProducts.map(product => product.popularity),\n      backgroundColor: 'rgba(75, 192, 192, 0.6)',\n      borderColor: 'rgba(75, 192, 192, 1)',\n      borderWidth: 1\n    }]\n  };\n  const chartOptions = {\n    plugins: {\n      legend: {\n        display: false\n      }\n    },\n    scales: {\n      x: {\n        type: 'time',\n        time: {\n          unit: 'day',\n          displayFormats: {\n            day: 'MMM D'\n          }\n        }\n      },\n      y: {\n        beginAtZero: true,\n        max: 100\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Product Statistics\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Popularity Chart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Bar, {\n        data: chartData,\n        options: chartOptions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Sorted Products by Popularity\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: sortedProducts.map(product => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [product.name, \" - Popularity: \", product.popularity]\n        }, product.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleCheckout,\n      children: \"Checkout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n_s(Stat, \"foNpHFIIzthtBj7emDQOHwegtt8=\");\n_c = Stat;\nexport default Stat;\nvar _c;\n$RefreshReg$(_c, \"Stat\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","Bar","moment","jsxDEV","_jsxDEV","Stat","_s","productStats","setProductStats","sortedProducts","setSortedProducts","fetchProductStats","response","fetch","data","json","sortProductsByPopularity","error","console","stats","sorted","sort","a","b","popularity","handleCheckout","chartData","labels","map","product","date","format","datasets","label","backgroundColor","borderColor","borderWidth","chartOptions","plugins","legend","display","scales","x","type","time","unit","displayFormats","day","y","beginAtZero","max","children","fileName","_jsxFileName","lineNumber","columnNumber","options","name","id","onClick","_c","$RefreshReg$"],"sources":["/Users/tianhonggao/Desktop/sample-react/webpage/src/Admin/Statistic.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport moment from 'moment';\n\nconst Stat = () => {\n  const [productStats, setProductStats] = useState([]);\n  const [sortedProducts, setSortedProducts] = useState([]);\n\n  const fetchProductStats = useCallback(async () => {\n    try {\n      const response = await fetch('http://localhost:8000/api/productStats');\n      const data = await response.json();\n      setProductStats(data);\n      sortProductsByPopularity(data);\n    } catch (error) {\n      console.error('Failed to fetch product stats:', error);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchProductStats();\n  }, [fetchProductStats]);\n\n  const sortProductsByPopularity = useCallback((stats) => {\n    const sorted = [...stats].sort((a, b) => b.popularity - a.popularity);\n    setSortedProducts(sorted);\n  }, []);\n\n  const handleCheckout = () => {\n    // Handle the checkout process and update the statistics accordingly\n    // Make the necessary API calls to update the product stats on the server\n\n    // Fetch the updated product stats\n    fetchProductStats();\n  };\n\n  const chartData = {\n    labels: sortedProducts.map((product) => moment(product.date).format('MMM D')),\n    datasets: [\n      {\n        label: 'Popularity',\n        data: sortedProducts.map((product) => product.popularity),\n        backgroundColor: 'rgba(75, 192, 192, 0.6)',\n        borderColor: 'rgba(75, 192, 192, 1)',\n        borderWidth: 1,\n      },\n    ],\n  };\n\n  const chartOptions = {\n    plugins: {\n      legend: {\n        display: false,\n      },\n    },\n    scales: {\n      x: {\n        type: 'time',\n        time: {\n          unit: 'day',\n          displayFormats: {\n            day: 'MMM D',\n          },\n        },\n      },\n      y: {\n        beginAtZero: true,\n        max: 100,\n      },\n    },\n  };\n\n  return (\n    <div>\n      <h2>Product Statistics</h2>\n      <div>\n        <h3>Popularity Chart</h3>\n        <Bar data={chartData} options={chartOptions} />\n      </div>\n      <div>\n        <h3>Sorted Products by Popularity</h3>\n        <ul>\n          {sortedProducts.map((product) => (\n            <li key={product.id}>\n              {product.name} - Popularity: {product.popularity}\n            </li>\n          ))}\n        </ul>\n      </div>\n      <button onClick={handleCheckout}>Checkout</button>\n    </div>\n  );\n};\n\nexport default Stat;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}