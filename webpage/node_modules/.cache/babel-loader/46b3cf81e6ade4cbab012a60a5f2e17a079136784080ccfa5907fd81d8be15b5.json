{"ast":null,"code":"var _jsxFileName = \"/Users/tianhonggao/Desktop/sample-react/webpage/src/Admin/Statistic.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Chart as ChartJS, BarElement, CategoryScale, LinearScale, Title, Tooltip } from 'chart.js';\nimport { Bar } from 'react-chartjs-2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Stat = () => {\n  _s();\n  ChartJS.register(BarElement, CategoryScale, LinearScale, Title, Tooltip);\n  const [allProducts, setAllProducts] = useState([]);\n  useEffect(() => {\n    fetchDB();\n  }, []);\n  const fetchDB = async () => {\n    try {\n      const response = await fetch('http://localhost:8000/api/products', {\n        method: 'GET'\n      });\n      let data = await response.json();\n      setAllProducts(data.filter(item => item.quantity !== 0));\n    } catch (err) {\n      console.error('Failed to fetch products:', err);\n    }\n  };\n\n  // State to hold chart data\n  const [chartData, setChartData] = useState({\n    labels: [],\n    datasets: []\n  });\n  const colorMap = {\n    \"Apple\": \"rgba(255, 0, 0, 0.6)\",\n    \"Banana\": \"rgba(255, 255, 0, 0.6)\",\n    \"Peach\": \"rgba(255, 105, 180, 0.6)\",\n    \"Pineapple\": \"rgba(255, 223, 0, 0.6)\",\n    \"Watermelon\": \"rgba(60, 179, 113, 0.6)\"\n    // add other items here...\n  };\n\n  useEffect(() => {\n    const sortedProd = [...allProducts].sort((a, b) => b.sold - a.sold);\n    const labels = sortedProd.map(item => item.prod_name);\n    const data = sortedProd.map(item => item.sold);\n\n    // Set chart data\n    setChartData({\n      labels: labels,\n      datasets: [{\n        data: data,\n        backgroundColor: data.map(item => colorMap[item.prod_name] || \"rgba(75, 192, 192, 0.6)\"),\n        borderColor: data.map(item => colorMap[item.prod_name] || \"rgba(75, 192, 192, 1)\"),\n        borderWidth: 1\n      }]\n    });\n  }, [allProducts]);\n  const optionsForBar = {\n    indexAxis: 'y',\n    elements: {\n      bar: {\n        borderWidth: 2\n      }\n    },\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'right'\n      },\n      title: {\n        display: true,\n        text: 'Products Sold (Unit: lb)'\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: \"600px\",\n      height: \"600px\"\n    },\n    children: /*#__PURE__*/_jsxDEV(Bar, {\n      data: chartData,\n      options: optionsForBar\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n_s(Stat, \"58NHBtlAxoqQYaMGt5Ntvf+bkwo=\");\n_c = Stat;\nexport default Stat;\nvar _c;\n$RefreshReg$(_c, \"Stat\");","map":{"version":3,"names":["React","useEffect","useState","Chart","ChartJS","BarElement","CategoryScale","LinearScale","Title","Tooltip","Bar","jsxDEV","_jsxDEV","Stat","_s","register","allProducts","setAllProducts","fetchDB","response","fetch","method","data","json","filter","item","quantity","err","console","error","chartData","setChartData","labels","datasets","colorMap","sortedProd","sort","a","b","sold","map","prod_name","backgroundColor","borderColor","borderWidth","optionsForBar","indexAxis","elements","bar","responsive","plugins","legend","position","title","display","text","style","width","height","children","options","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/tianhonggao/Desktop/sample-react/webpage/src/Admin/Statistic.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Chart as ChartJS, BarElement, CategoryScale, LinearScale, Title, Tooltip } from 'chart.js';\nimport { Bar } from 'react-chartjs-2';\n\nconst Stat = () => {\n\n  ChartJS.register(BarElement, CategoryScale, LinearScale, Title, Tooltip);\n\n  const [allProducts, setAllProducts] = useState([]);\n\n  useEffect(() => {\n    fetchDB();\n  }, []);\n\n  const fetchDB = async () => {\n    try {\n      const response = await fetch('http://localhost:8000/api/products', {\n        method: 'GET',\n      });\n      let data = await response.json();\n      setAllProducts(data.filter(item => item.quantity !== 0));\n    } catch (err) {\n      console.error('Failed to fetch products:', err);\n    }\n  };\n\n\n  // State to hold chart data\n  const [chartData, setChartData] = useState({ labels: [], datasets: [] });\n  const colorMap = {\n    \"Apple\": \"rgba(255, 0, 0, 0.6)\",\n    \"Banana\": \"rgba(255, 255, 0, 0.6)\",\n    \"Peach\": \"rgba(255, 105, 180, 0.6)\",\n    \"Pineapple\": \"rgba(255, 223, 0, 0.6)\",\n    \"Watermelon\": \"rgba(60, 179, 113, 0.6)\"\n    // add other items here...\n  };\n\n  useEffect(() => {\n    const sortedProd = [...allProducts].sort((a, b) => b.sold - a.sold);\n    const labels = sortedProd.map(item => item.prod_name);\n    const data = sortedProd.map(item => item.sold);\n\n    // Set chart data\n    setChartData({\n      labels: labels,\n      datasets: [{\n        data: data,\n        backgroundColor: data.map(item => colorMap[item.prod_name] || \"rgba(75, 192, 192, 0.6)\"),\n        borderColor: data.map(item => colorMap[item.prod_name] || \"rgba(75, 192, 192, 1)\"),\n        borderWidth: 1,\n      }],\n    });\n\n  }, [allProducts]);\n\n  const optionsForBar = {\n    indexAxis: 'y',\n    elements: {\n      bar: {\n        borderWidth: 2,\n      },\n    },\n    responsive: true,\n    plugins: {\n      legend: {\n        position: 'right',\n      },\n      title: {\n        display: true,\n        text: 'Products Sold (Unit: lb)',\n      },\n    },\n  };\n\n  return (\n    <div style={{width: \"600px\", height: \"600px\"}}>\n      <Bar data={chartData} options={optionsForBar}/>\n    </div>\n  );\n};\n\nexport default Stat;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}