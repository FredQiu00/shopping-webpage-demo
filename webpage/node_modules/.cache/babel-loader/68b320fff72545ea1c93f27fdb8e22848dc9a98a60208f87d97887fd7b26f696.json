{"ast":null,"code":"var _jsxFileName = \"/Users/tianhonggao/Desktop/sample-react/webpage/src/Admin/Statistic.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useCallback } from 'react';\nimport { Bar } from 'react-chartjs-2';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Stat = () => {\n  _s();\n  const [productStats, setProductStats] = useState([]);\n  const [sortedProducts, setSortedProducts] = useState([]);\n  useEffect(() => {\n    fetchProductStats();\n  }, []);\n  const fetchProductStats = async () => {\n    try {\n      const response = await fetch('http://localhost:8000/api/productStats');\n      const data = await response.json();\n      setProductStats(data);\n      sortProductsByPopularity(data);\n    } catch (error) {\n      console.error('Failed to fetch product stats:', error);\n    }\n  };\n  const sortProductsByPopularity = useCallback(stats => {\n    // Sort the products based on their popularity\n    const sorted = [...stats].sort((a, b) => b.popularity - a.popularity);\n    setSortedProducts(sorted);\n  }, []);\n  const handleCheckout = () => {\n    // Handle the checkout process and update the statistics accordingly\n    // Make the necessary API calls to update the product stats on the server\n\n    // Fetch the updated product stats\n    fetchProductStats();\n  };\n\n  // Prepare data for the chart\n  const chartData = {\n    labels: sortedProducts.map(product => product.name),\n    datasets: [{\n      label: 'Popularity',\n      data: sortedProducts.map(product => product.popularity),\n      backgroundColor: 'rgba(75, 192, 192, 0.6)',\n      borderColor: 'rgba(75, 192, 192, 1)',\n      borderWidth: 1\n    }]\n  };\n\n  // Chart options\n  const chartOptions = {\n    scales: {\n      y: {\n        beginAtZero: true\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Product Statistics\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Popularity Chart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Bar, {\n        data: chartData,\n        options: chartOptions\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Sorted Products by Popularity\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: sortedProducts.map(product => /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [product.name, \" - Popularity: \", product.popularity]\n        }, product.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleCheckout,\n      children: \"Checkout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n_s(Stat, \"ITJ696Yr6+f4u44mJW74cxQvkw0=\");\n_c = Stat;\nexport default Stat;\nvar _c;\n$RefreshReg$(_c, \"Stat\");","map":{"version":3,"names":["React","useEffect","useState","useCallback","Bar","jsxDEV","_jsxDEV","Stat","_s","productStats","setProductStats","sortedProducts","setSortedProducts","fetchProductStats","response","fetch","data","json","sortProductsByPopularity","error","console","stats","sorted","sort","a","b","popularity","handleCheckout","chartData","labels","map","product","name","datasets","label","backgroundColor","borderColor","borderWidth","chartOptions","scales","y","beginAtZero","children","fileName","_jsxFileName","lineNumber","columnNumber","options","id","onClick","_c","$RefreshReg$"],"sources":["/Users/tianhonggao/Desktop/sample-react/webpage/src/Admin/Statistic.js"],"sourcesContent":["import React, { useEffect, useState, useCallback } from 'react';\nimport { Bar } from 'react-chartjs-2';\n\nconst Stat = () => {\n  const [productStats, setProductStats] = useState([]);\n  const [sortedProducts, setSortedProducts] = useState([]);\n\n  useEffect(() => {\n    fetchProductStats();\n  }, []);\n\n  const fetchProductStats = async () => {\n    try {\n      const response = await fetch('http://localhost:8000/api/productStats');\n      const data = await response.json();\n      setProductStats(data);\n      sortProductsByPopularity(data);\n    } catch (error) {\n      console.error('Failed to fetch product stats:', error);\n    }\n  };\n\n  const sortProductsByPopularity = useCallback((stats) => {\n    // Sort the products based on their popularity\n    const sorted = [...stats].sort((a, b) => b.popularity - a.popularity);\n    setSortedProducts(sorted);\n  }, []);\n\n  const handleCheckout = () => {\n    // Handle the checkout process and update the statistics accordingly\n    // Make the necessary API calls to update the product stats on the server\n\n    // Fetch the updated product stats\n    fetchProductStats();\n  };\n\n  // Prepare data for the chart\n  const chartData = {\n    labels: sortedProducts.map((product) => product.name),\n    datasets: [\n      {\n        label: 'Popularity',\n        data: sortedProducts.map((product) => product.popularity),\n        backgroundColor: 'rgba(75, 192, 192, 0.6)',\n        borderColor: 'rgba(75, 192, 192, 1)',\n        borderWidth: 1,\n      },\n    ],\n  };\n\n  // Chart options\n  const chartOptions = {\n    scales: {\n      y: {\n        beginAtZero: true,\n      },\n    },\n  };\n\n  return (\n    <div>\n      <h2>Product Statistics</h2>\n      <div>\n        <h3>Popularity Chart</h3>\n        <Bar data={chartData} options={chartOptions} />\n      </div>\n      <div>\n        <h3>Sorted Products by Popularity</h3>\n        <ul>\n          {sortedProducts.map((product) => (\n            <li key={product.id}>\n              {product.name} - Popularity: {product.popularity}\n            </li>\n          ))}\n        </ul>\n      </div>\n      <button onClick={handleCheckout}>Checkout</button>\n    </div>\n  );\n};\n\nexport default Stat;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}